# Notes UI - API Layer Documentation

This document describes the TypeScript type definitions and API client layer for interacting with the Notes Service backend.

## Type Definitions

The application provides TypeScript interfaces that match the backend API DTOs:

### Note Interface

```typescript
interface Note {
  id: string;
  title: string;
  content: string;
  createdAt: string;
  updatedAt: string;
}
```

Represents a complete note entity as returned from the API.

### CreateNote Interface

```typescript
interface CreateNote {
  title: string;
  content: string;
}
```

Data required to create a new note. The `id`, `createdAt`, and `updatedAt` fields are automatically generated by the backend.

### UpdateNote Interface

```typescript
interface UpdateNote {
  title: string;
  content: string;
}
```

Data required to update an existing note. The `id`, `createdAt`, and `updatedAt` fields are managed by the backend.

### ApiError Interface

```typescript
interface ApiError {
  message: string;
}
```

Error response structure returned by the API when an error occurs.

## API Client

The `notesApi` client provides methods for all CRUD operations:

### Import

```typescript
import { notesApi, NotesApiError } from './api';
import type { Note, CreateNote, UpdateNote } from './types';
```

### Methods

#### getAllNotes()

Retrieves all notes from the API.

```typescript
const notes: Note[] = await notesApi.getAllNotes();
```

**Returns:** `Promise<Note[]>`

#### getNoteById(id)

Retrieves a specific note by its ID.

```typescript
const note: Note = await notesApi.getNoteById('note-id');
```

**Parameters:**
- `id` (string): The note ID

**Returns:** `Promise<Note>`

**Throws:** `NotesApiError` with status 404 if note is not found

#### createNote(note)

Creates a new note.

```typescript
const newNote: CreateNote = {
  title: 'My Note',
  content: 'Note content',
};

const createdNote: Note = await notesApi.createNote(newNote);
```

**Parameters:**
- `note` (CreateNote): The note data

**Returns:** `Promise<Note>` - The created note with generated ID and timestamps

#### updateNote(id, note)

Updates an existing note.

```typescript
const updatedData: UpdateNote = {
  title: 'Updated Title',
  content: 'Updated content',
};

const updatedNote: Note = await notesApi.updateNote('note-id', updatedData);
```

**Parameters:**
- `id` (string): The note ID
- `note` (UpdateNote): The updated note data

**Returns:** `Promise<Note>` - The updated note

**Throws:** `NotesApiError` with status 404 if note is not found

#### deleteNote(id)

Deletes a note.

```typescript
await notesApi.deleteNote('note-id');
```

**Parameters:**
- `id` (string): The note ID

**Returns:** `Promise<void>`

**Throws:** `NotesApiError` with status 404 if note is not found

## Error Handling

The API client throws `NotesApiError` for all API-related errors. This custom error class includes:

- `statusCode`: HTTP status code
- `apiError`: The API error response (if available)
- `message`: Error message

### Example Error Handling

```typescript
try {
  const note = await notesApi.getNoteById('invalid-id');
} catch (error) {
  if (error instanceof NotesApiError) {
    if (error.statusCode === 404) {
      console.error('Note not found');
    } else {
      console.error(`API Error ${error.statusCode}:`, error.message);
    }
  } else {
    console.error('Unexpected error:', error);
  }
}
```

## Configuration

The API base URL can be configured using the `VITE_API_BASE_URL` environment variable:

### .env file

```env
VITE_API_BASE_URL=http://localhost:5138/api
```

If not set, the default is `http://localhost:5138/api`.

## Examples

See `src/examples.ts` for complete usage examples of all API operations.

## Backend API Endpoints

The frontend API client maps to these backend endpoints:

- `GET /api/notes` - Get all notes
- `GET /api/notes/{id}` - Get a specific note
- `POST /api/notes` - Create a new note
- `PUT /api/notes/{id}` - Update a note
- `DELETE /api/notes/{id}` - Delete a note

For more information about the backend API, see the API documentation or Swagger UI at `http://localhost:5138/swagger`.
